<form [formGroup]="addProjectForm" (ngSubmit)="onSubmit()">
  <h2>Añadir proyecto</h2>
  <p>
    Todos los campos que contengan un asterisco
    <strong><span aria-label="required">*</span></strong> son obligatorios
  </p>
  <div class="input-box">
    <label for="title">
      <span>Título del proyecto: </span>
      <strong><span aria-label="required">*</span></strong>
    </label>
    <input
      type="text"
      id="title"
      name="title"
      formControlName="title"
      placeholder="Título del proyecto"
      onfocus="this.placeholder = ''"
      onblur="this.placeholder = 'Título del proyecto'"
    />
    <div
      class="txt-alert"
      *ngIf="
        addProjectForm.get('title')?.errors?.['required'] &&
        (addProjectForm.get('title')?.dirty ||
        addProjectForm.get('title')?.touched)
      "
    >
      El campo del título es obligatorio.
    </div>
  </div>

  <div class="input-box">
    <label for="year">
      <span>Año: </span>
      <strong><span aria-label="required">*</span></strong>
    </label>
    <input
      type="number"
      id="year"
      name="year"
      formControlName="year"
      placeholder="Año"
      onfocus="this.placeholder = ''"
      onblur="this.placeholder = 'Año'"
    />
    <div
      class="txt-alert"
      *ngIf="
      addProjectForm.get('year')?.errors?.['required'] &&
      (addProjectForm.get('year')?.dirty ||
      addProjectForm.get('year')?.touched)
    "
    >
      Es obligatorio añadir un año.
    </div>
  </div>

  <div class="input-box">
    <label for="director">
      <span>Director: </span>
      <strong><span aria-label="required">*</span></strong>
    </label>
    <input
      type="text"
      id="director"
      name="director"
      formControlName="director"
      placeholder="Nombre del director"
      onfocus="this.placeholder = ''"
      onblur="this.placeholder = 'Nombre del director'"
    />

    <div
      class="txt-alert"
      *ngIf="
      addProjectForm.get('director')?.errors?.['required'] &&
      (addProjectForm.get('director')?.dirty ||
      addProjectForm.get('director')?.touched)
    "
    >
      Es obligatorio añadir uno o varios directores.
    </div>
  </div>

  <div class="input-box">
    <label for="dop">
      <span>DOP: </span>
      <strong><span aria-label="required">*</span></strong>
    </label>
    <input
      type="text"
      id="dop"
      name="dop"
      formControlName="dop"
      placeholder="Nombre del DOP"
      onfocus="this.placeholder = ''"
      onblur="this.placeholder = 'Nombre del DOP'"
    />
    <div
      class="txt-alert"
      *ngIf="
      addProjectForm.get('dop')?.errors?.['required'] &&
      (addProjectForm.get('dop')?.dirty ||
      addProjectForm.get('dop')?.touched)
    "
    >
      Es obligatorio añadir uno varios DOP.
    </div>
  </div>

  <div class="input-box">
    <label for="category">
      <span>Género de la película: </span>
      <strong><span aria-label="required">*</span></strong>
    </label>
    <input
      type="text"
      id="category"
      name="category"
      formControlName="category"
      placeholder="Categoría de la película"
      onfocus="this.placeholder = ''"
      onblur="this.placeholder = 'Categoría de la película'"
    />
    <div
      class="txt-alert"
      *ngIf="
      addProjectForm.get('category')?.errors?.['required'] &&
      (addProjectForm.get('category')?.dirty ||
      addProjectForm.get('category')?.touched)
    "
    >
      Es obligatorio añadir al menos un género de la película.
    </div>
  </div>

  <div class="input-box">
    <label for="img">
      <span>Imagen: </span>
      <strong><span aria-label="required">*</span></strong>
    </label>
    <!-- TODO: Ver si se puede cambiar el estilo del botón -->
    <input type="file" id="img" name="img" (change)="onFileChange($event)" />
    <div
      class="txt-alert"
      *ngIf="
      addProjectForm.get('img')?.errors?.['required'] &&
      (addProjectForm.get('img')?.dirty ||
      addProjectForm.get('img')?.touched)
    "
    >
      Es obligatorio añadir una imagen.
    </div>

    <div *ngIf="selectedFileUrl">
      <img [src]="selectedFileUrl" alt="Previsualización" width="200px" />
    </div>
  </div>

  <div class="input-box">
    <label for="trailerUrl">
      <span>Url del trailer: </span>
    </label>
    <input
      type="text"
      id="trailerUrl"
      name="trailerUrl"
      formControlName="trailerUrl"
      placeholder="Url del trailer"
      onfocus="this.placeholder = ''"
      onblur="this.placeholder = 'Url del trailer'"
    />
  </div>
  <div class="button-group">
    <button class="btn-primary" type="submit">Guardar proyecto</button>
    <button class="btn-primary" type="button" (click)="cancel()">
      Cancelar
    </button>
  </div>
</form>

<!-- DIÁLOGO -->

<div class="dialog" *ngIf="dialogIsOpen">
  <h2>{{ dialogMessageH2 }}</h2>
  <p>{{ dialogP }}</p>
  <div class="btn-dialog">
    <button
      *ngIf="btnCancel !== ''"
      class="btn-primary grow"
      (click)="hideModal()"
    >
      {{ btnCancel }}
    </button>
    <button *ngIf="btnOk !== ''" class="btn-primary grow" (click)="dontSave()">
      {{ btnOk }}
    </button>
  </div>
</div>
<div class="backdrop" *ngIf="dialogIsOpen" (click)="hideModal()"></div>
